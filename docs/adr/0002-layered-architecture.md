# 0002 — Layered architecture for services

**Дата:** 2025-11-19

**Рішення:** Кожен сервіс (наприклад, `catalog-service`) має структуру:
- `api/` — HTTP-роути/контролери (приймають запити, перетворюють у DTO)
- `service/` — бізнес-логіка, валідація, use-cases (працює з domain і storage)
- `domain/` — сутності (без залежностей на інфраструктуру)
- `infra/` (опціонально) — доступ до БД, репозиторії

**Напрямок залежностей:** api → service → domain → infra (зверху вниз).  
**Заборонено:** api напряму звертатись у infra або робити JOIN між таблицями різних сервісів.

**Причина:** Чітке розділення дозволяє писати юніт-тести для `service/` і замінювати інфраструктуру під час тестів (моки).
